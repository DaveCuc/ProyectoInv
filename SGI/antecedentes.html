<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SGI - Antecedentes Familiares</title>

  <!-- Estilos de esta vista -->
  <link rel="stylesheet" href="antecedentes.css" />
  <link rel="stylesheet" href="styles-fondo.css" />

  <!-- 칈conos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

  <!-- L칩gica de esta vista y del sistema -->
  <script defer src="antecedentes.js"></script> <!-- Aqu칤 se recolectan los valores para enviar -->
  <script defer src="cita-psicologo.js"></script>
</head>
<body>
  <!-- HEADER (insertado din치micamente) -->
  <div id="header-container"></div>
  <script src="header.js"></script>

  <!-- NOTIFICACIONES Y MEN칔 PERFIL (ya funcionales) -->
  <div id="notification-panel" class="hidden">
    <p>No tienes nuevas notificaciones</p>
  </div>

  <div id="profile-menu" class="hidden">
    <p id="profile-name">Nombre Psic칩logo</p>
    <div class="profile-menu-item">Actualizar informaci칩n</div>
    <div class="profile-menu-item">Cambiar contrase침a</div>
    <div class="profile-menu-item" onclick="location.href='index.html'">Cerrar sesi칩n</div>
  </div>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="cuestionario-main">
    <h1>ANTECEDENTES FAMILIARES</h1>

    <div class="cuestionario-container">

      <!-- 游댳 INFO DEL ALUMNO (rellenada por JS con datos del backend) -->
      <!-- Backend debe proporcionar esta informaci칩n a trav칠s de localStorage, sesi칩n, query o fetch -->
      <div class="alumno-info-card">
        <div class="alumno-avatar">
          <i class="fas fa-user"></i>
        </div>
        <p>Nombre Alumno: <span id="info-nombre-alumno"></span></p>
        <p>N칰m Control: <span id="info-num-control"></span></p>
        <p>Carrera: <span id="info-carrera"></span></p>
        <p>Semestre: <span id="info-semestre"></span></p>
        <p>Edad: <span id="info-edad"></span></p>
        <p>Asistencias: <span id="info-asistencias"></span></p>
        <button class="btn btn-azul">Ver m치s Informaci칩n</button>
      </div>

      <!-- 游댲 FORMULARIO DE ANTECEDENTES FAMILIARES -->
      <!-- Cada bot칩n "S칤/No" y opci칩n 칰nica se captura con JS en el archivo 'antecedentes.js' -->
      <!-- Backend debe esperar estos datos para guardar en la tabla: antecedentes_familiares -->

      <div class="formulario-card">
        <h2>ANTECEDENTES FAMILIARES</h2>

        <!-- PREGUNTAS BINARIAS (s칤/no) -->
        <!-- Capturadas por clase: .si-no-btn y atributo data-option -->
        <div class="si-no-options">
          <label>Padres Juntos:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="padres-juntos" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="padres-juntos" data-value="no">No</button>
          </div>

          <label>Padre fallecido:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="padre-fallecido" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="padre-fallecido" data-value="no">No</button>
          </div>

          <label>Madre fallecida:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="madre-fallecida" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="madre-fallecida" data-value="no">No</button>
          </div>

          <label>Conflictos con otros familiares:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="conflictos-otros" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="conflictos-otros" data-value="no">No</button>
          </div>

          <label>Conflictos con el padre:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="conflictos-padre" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="conflictos-padre" data-value="no">No</button>
          </div>

          <label>Conflictos con la madre:</label>
          <div class="si-no-group">
            <button type="button" class="si-no-btn" data-option="conflictos-madre" data-value="si">S칤</button>
            <button type="button" class="si-no-btn" data-option="conflictos-madre" data-value="no">No</button>
          </div>
        </div>

        <!-- OPCI칍N 칔NICA: Actitud con padres -->
        <!-- Se env칤a como: actitud_padres: "hostil" -->
        <div class="opcion-seleccion">
          <label>Actitud con los padres:</label>
          <div class="actitud-padres-buttons">
            <button type="button" class="opcion-btn" data-opcion="actitud-padres" data-value="afectuosa">Afectuosa</button>
            <button type="button" class="opcion-btn" data-opcion="actitud-padres" data-value="sobreprotectora">Sobreprotectora</button>
            <button type="button" class="opcion-btn" data-opcion="actitud-padres" data-value="indiferente">Indiferente</button>
            <button type="button" class="opcion-btn" data-opcion="actitud-padres" data-value="hostil">Hostil</button>
            <button type="button" class="opcion-btn" data-opcion="actitud-padres" data-value="relacion-inexistente">Relaci칩n Inexistente</button>
          </div>
        </div>

        <!-- N칰mero de hermanos y lugar entre ellos -->
        <div class="numero-hermanos">
          <label>N칰mero de Hermanos:</label>
          <div class="hermanos-input-group">
            <label for="hermanos-varones">Varones:</label>
            <input type="number" id="hermanos-varones" name="hermanos-varones" min="0" />
          </div>
          <div class="hermanos-input-group">
            <label for="hermanos-mujeres">Mujeres:</label>
            <input type="number" id="hermanos-mujeres" name="hermanos-mujeres" min="0" />
          </div>
          <label for="lugar-hermanos">Lugar entre hermanos:</label>
          <select id="lugar-hermanos" name="lugar-hermanos">
            <option value="">Seleccione</option>
            <option value="mayor">Mayor</option>
            <option value="menor">Menor</option>
            <option value="enmedio">En medio</option>
          </select>
        </div>

        <!-- Relaci칩n con hermanos -->
        <div class="opcion-seleccion">
          <label>Relaci칩n con los hermanos:</label>
          <div class="relacion-hermanos-buttons">
            <button type="button" class="opcion-btn" data-opcion="relacion-hermanos" data-value="afectuosa">Afectuosa</button>
            <button type="button" class="opcion-btn" data-opcion="relacion-hermanos" data-value="sobreprotectora">Sobreprotectora</button>
            <button type="button" class="opcion-btn" data-opcion="relacion-hermanos" data-value="indiferente">Indiferente</button>
            <button type="button" class="opcion-btn" data-opcion="relacion-hermanos" data-value="hostil">Hostil</button>
            <button type="button" class="opcion-btn" data-opcion="relacion-hermanos" data-value="relacion-inexistente">Relaci칩n Inexistente</button>
          </div>
        </div>

        <!-- Problemas en el entorno familiar -->
        <div class="opcion-seleccion">
          <label>Problemas que se detectan en la vida familiar:</label>
          <div class="problemas-familiares-buttons">
            <button type="button" class="opcion-btn" data-opcion="problemas-familiares" data-value="alcoholismo">Alcoholismo</button>
            <button type="button" class="opcion-btn" data-opcion="problemas-familiares" data-value="drogadiccion">Drogadicci칩n</button>
            <button type="button" class="opcion-btn" data-opcion="problemas-familiares" data-value="violencia">Violencia</button>
            <button type="button" class="opcion-btn" data-opcion="problemas-familiares" data-value="abandono">Abandono</button>
            <button type="button" class="opcion-btn" data-opcion="problemas-familiares" data-value="enfermedad-cronica">Enfermedad Cr칩nica</button>
          </div>
        </div>

        <!-- Texto libre -->
        <div>
          <label for="vive-con">쮺on qui칠n vive actualmente?</label>
          <textarea id="vive-con" name="vive-con" rows="3"></textarea>
        </div>

        <!-- BOTONES DE NAVEGACI칍N -->
        <!-- El bot칩n "siguiente" debe enviar los datos del formulario (ver 'antecedentes.js') -->
        <div class="botones-container">
          <button class="btn btn-azul" onclick="location.href='cuestionario-citas.html'">atras</button>

          <!-- 游 Este bot칩n deber칤a ejecutar un fetch POST a:
               POST /api/cuestionario/antecedentes
               {
                 alumno_id: "A1234",
                 padres_juntos: "si",
                 padre_fallecido: "no",
                 ...
                 vive_con: "t칤os"
               }
          -->
          <button class="btn btn-azul" onclick="location.href='padecimiento-actual.html'">siguiente</button>
        </div>
      </div>
    </div>
  </main>
</body>
</html>
